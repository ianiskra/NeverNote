<!DOCTYPE html>


<head>
	<link rel="stylesheet" type="text/css" href="canvas_styles.css">
</head>

<div id="canvas">

</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>

<script>
	// Retrieve the canvas ID
	canvasDiv = document.getElementById('canvas');
	var canvas = document.createElement('canvas');

	// Size of Canvas
	canvas.setAttribute('width', '1000');
	canvas.setAttribute('height', '500');
	canvas.setAttribute('id', 'canvas');

	// Background of the Canvas
	canvas.style.backgroundColor = "#ddd";
	canvasDiv.appendChild(canvas);

	
	if(typeof G_vmlCanvasManger != 'undefined'){
		canvas = G_vmlCanvasManger.initElement(canvas);
	}

	window.context = canvas.getContext("2d");

	// Fires when the user depresses the mouse button.
	$("#canvas").mousedown(function(e){
		// X and Y grid
		var mouseX = e.pageX-this.offsetLeft;
		var mouseY = e.pageY-this.offsetTop;

		paint = true
		addClick(e.pageX-this.offsetLeft, e.pageY-this.offsetTop);
		redraw();
	});

	$("#canvas").mousemove(function(e){
		if(paint){
			addClick(e.pageX-this.offsetLeft, e.pageY-this.offsetTop, true);
			redraw();
		}
	});

	// Fires when user releases the mouse button.
	$("#canvas").mouseup(function(e){
		paint = false;
	});

	// Won't resume painting without Click
	$("#canvas").mouseleave(function(e){
		paint = false;
	});

	// Variables for the mouse control
	var clickX = new Array();
	var clickY = new Array();
	var clickDrag = new Array();
	var paint;

	/* Functions */
	
	function addClick(x, y, dragging){
		clickX.push(x);
		clickY.push(y);
		clickDrag.push(dragging);
	}

	// Clear Canvas
	function redraw(){
		window.context.clearRect(0, 0, content.canvas.width, content.canvas.height); // Uncaught Reference Error, content not defined
		
		// Ink is default Black
		context.strokeStyle = "#000";

		// Click is Round
		context.lineJoin = "round";

		// Need to allow user to adjust Brush size
		context.lineWidth = 5;

		// As mouse click and drag is inside canvas
		for(var i = 0; i < clickX.length; i++){
			context.beginPath();

			// Check for Click and Drag
			if(clickDrag[i] && i){
				context.moveTo(clickX[i-1], clickY[i-1]);
			}
			else{
				context.moveTo(clickX[i]-1, clickY[i]);
			}
			context.lineTo(clickX[i], clickY[i]);
			context.closePath();
			context.stroke();

		}

	}

// Color Manipulation: https://medium.freecodecamp.org/learn-how-to-manipulate-the-dom-by-building-a-simple-javascript-color-game-1a3aec1d109a

</script>

<div class="btn-holder">
	<button class="red-btn" onclick="window.location.reload()">reset</button>
</div>
